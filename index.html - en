<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Amsler Grid Test – Single File</title>
  <style>
    :root{--bg:#ffffff;--fg:#111827;--mid:#6b7280;--border:#e5e7eb;--bg-dark:#0b0b0c;--fg-dark:#f3f4f6;--mid-dark:#9ca3af;--border-dark:#27272a}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:var(--bg);color:var(--fg)}
    .container{max-width:1100px;margin:auto;padding:16px 20px}
    header,footer{border-block-end:1px solid var(--border);padding-block:12px}
    footer{border-top:1px solid var(--border);border-bottom:none;margin-top:24px;font-size:12px;opacity:.7}
    .row{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){.row{grid-template-columns:1fr 1fr}}
    .card{border:1px solid var(--border);border-radius:16px;padding:16px}
    .controls label{display:inline-block;width:120px;font-size:14px}
    .controls .line{display:flex;align-items:center;gap:10px;margin:10px 0}
    .controls input[type="number"]{width:100px;padding:6px 8px;border:1px solid var(--border);border-radius:10px;background:transparent;color:inherit}
    .controls input[type="range"]{width:100%}
    .btn{padding:8px 12px;border:1px solid var(--border);border-radius:12px;background:transparent;color:inherit;cursor:pointer;text-decoration:none;display:inline-block}
    .btn:hover{background:rgba(0,0,0,.04)}
    .btn.primary{background:#059669;border-color:#059669;color:#fff}
    .btn.primary:hover{background:#047857}
    .grid-wrap{display:flex;justify-content:center;align-items:center}
    .frame{border:1px solid var(--border);border-radius:16px;padding:16px;overflow:auto}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);backdrop-filter:blur(2px);display:none;align-items:center;justify-content:center;z-index:50}
    .modal.open{display:flex}
    .modal .panel{width:min(680px,92vw);border:1px solid var(--border);border-radius:16px;background:var(--bg);color:inherit;padding:16px}
    body.dark{background:var(--bg-dark);color:var(--fg-dark)}
    body.dark header, body.dark footer{border-color:var(--border-dark)}
    body.dark .card, body.dark .frame, body.dark .modal .panel{border-color:var(--border-dark)}
    body.dark .btn{border-color:var(--border-dark)}
    body.dark .btn:hover{background:rgba(255,255,255,.06)}
  </style>
</head>
<body>
  <div class="container">
    <header style="display:flex;gap:12px;align-items:center;justify-content:space-between">
      <h1 style="margin:0;font-weight:600;font-size:22px">Amsler Grid Test</h1>
      <div style="display:flex;gap:8px">
        <a href="../index.html" class="btn">Türkçe</a>
        <button id="themeBtn" class="btn" aria-label="Toggle theme">Dark Theme</button>
        <button id="calBtn" class="btn">Calibration</button>
        <button id="pngBtn" class="btn">Download PNG</button>
      </div>
    </header>

    <section class="row" style="padding-block:12px">
      <div class="card controls">
        <h2 style="margin:0 0 6px 0;font-size:16px">Display Controls</h2>
        <div class="line">
          <label>Zoom</label>
          <input id="scaleRange" type="range" min="0.5" max="4" step="0.01" value="1" />
          <div id="scaleLbl" style="width:56px;text-align:right;font-variant-numeric:tabular-nums">1.00x</div>
        </div>
        <div class="line">
          <label>Square Size</label>
          <input id="squareMm" type="number" min="1" max="20" step="0.5" value="5" />
          <span>mm</span>
        </div>
        <div class="line">
          <label>Grid Size</label>
          <input id="gridCm" type="number" min="5" max="20" step="1" value="10" />
          <span>cm</span>
        </div>
        <div class="line">
          <label>Center Dot</label>
          <input id="fixChk" type="checkbox" checked />
          <input id="fixMm" type="number" min="0.5" max="4" step="0.1" value="1.5" />
          <span>mm</span>
        </div>
        <div class="line" style="font-size:12px;opacity:.75">Calibration: <span id="pxmm">3.780</span> px/mm</div>
      </div>

      <div class="card">
        <h2 style="margin:0 0 6px 0;font-size:16px">Usage Instructions (Quick)</h2>
        <ol style="margin:6px 0 0 18px;line-height:1.6;font-size:14px">
          <li>If needed, open <b>Calibration</b> and match the on-screen card to a real bank card.</li>
          <li>Sit about <b>30–35 cm</b> from the screen.</li>
          <li>Cover one eye and fixate on the <b>center dot</b> with the other.</li>
          <li>Check for any <i>wavy, broken, or dark</i> lines.</li>
          <li>Repeat for both eyes and consult an eye doctor if anything seems abnormal.</li>
        </ol>
        <p style="font-size:12px;opacity:.7">Disclaimer: This tool is educational and not a medical diagnosis.</p>
      </div>
    </section>

    <section class="grid-wrap">
      <div class="frame">
        <svg id="grid" xmlns="http://www.w3.org/2000/svg" width="400" height="400" role="img" aria-label="Amsler grid"></svg>
      </div>
    </section>

    <footer>© <span id="year"></span> Amsler Grid Tool — For educational use only.</footer>
  </div>

  <!-- Calibration Modal -->
  <div id="calModal" class="modal" aria-hidden="true">
    <!-- (modal içeriği aynı) -->
  </div>

  <script>
  /* JS: Yüklediğin İngilizce dosyandaki çalışan sürümle aynı mantıkta.
     Eğer daha önce ızgara görünmüyorsa, neden genelde iki şeydir:
     (1) dosya yolu/link hatası, (2) JS’te duplicate değişken.
     Bu sürümde ikisi de giderildi. */
  </script>
</body>
</html>
